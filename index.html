<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Indicator Tester Multi-Timeframe</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Trading Indicator Tester Multi-Timeframe</h1>
            <p>Test delle performance dell'indicatore con diversi timeframe, livelli di stop loss e risk-reward</p>
        </header>

        <!-- Timeframe Navigation -->
        <nav class="timeframe-nav">
            <div class="timeframe-tabs">
                <button class="timeframe-tab" data-timeframe="M1">
                    <span class="tab-icon">üìà</span>
                    <span class="tab-label">M1</span>
                    <span class="tab-subtitle">1 Minuto</span>
                </button>
                <button class="timeframe-tab" data-timeframe="M3">
                    <span class="tab-icon">üìä</span>
                    <span class="tab-label">M3</span>
                    <span class="tab-subtitle">3 Minuti</span>
                </button>
                <button class="timeframe-tab" data-timeframe="M5">
                    <span class="tab-icon">üìâ</span>
                    <span class="tab-label">M5</span>
                    <span class="tab-subtitle">5 Minuti</span>
                </button>
                <button class="timeframe-tab" data-timeframe="M15">
                    <span class="tab-icon">‚è±Ô∏è</span>
                    <span class="tab-label">M15</span>
                    <span class="tab-subtitle">15 Minuti</span>
                </button>
                <button class="timeframe-tab" data-timeframe="H1">
                    <span class="tab-icon">üïê</span>
                    <span class="tab-label">H1</span>
                    <span class="tab-subtitle">1 Ora</span>
                </button>
                <button class="timeframe-tab" data-timeframe="H4">
                    <span class="tab-icon">üïì</span>
                    <span class="tab-label">H4</span>
                    <span class="tab-subtitle">4 Ore</span>
                </button>
            </div>
        </nav>

        <!-- Current Timeframe Display -->
        <div class="current-timeframe">
            <span>Timeframe Corrente: </span>
            <span class="current-tf-label" id="currentTimeframeDisplay">M1 - 1 Minuto</span>
        </div>

        <!-- Notification Area -->
        <div class="notification-area hidden" id="notificationArea"></div>

        <!-- Controls -->
        <div class="controls">
            <div class="control-group">
                <button class="btn btn--primary" id="addRowBtn">
                    <span>‚ûï</span>
                    Aggiungi Riga
                </button>
                <button class="btn btn--secondary" id="clearCurrentBtn">
                    <span>üóëÔ∏è</span>
                    Cancella Timeframe
                </button>
                <button class="btn btn--outline btn--danger" id="resetAllBtn">
                    <span>üîÑ</span>
                    Reset Completo
                </button>
            </div>
            <div class="control-group">
                <button class="btn btn--outline" id="exportAllBtn">
                    <span>üì¶</span>
                    Esporta Tutto (JSON)
                </button>
                <button class="btn btn--outline" id="exportCurrentBtn">
                    <span>üìÑ</span>
                    Esporta Corrente (CSV)
                </button>
                <button class="btn btn--outline" id="importBtn">
                    <span>üì•</span>
                    Importa Dati
                </button>
                <input type="file" id="importFileInput" accept=".json" class="hidden">
            </div>
        </div>

        <!-- Trading Table -->
        <div class="table-container">
            <table class="trading-table" id="tradingTable">
                <thead>
                    <tr>
                        <th rowspan="3" class="date-header">Data e Orario</th>
                        <th rowspan="3" class="price-header">Prezzo Entrata</th>
                        <th colspan="4" class="stop-header">Stop Loss 30 Pips</th>
                        <th colspan="4" class="stop-header">Stop Loss 50 Pips</th>
                        <th colspan="4" class="stop-header">Stop Loss 75 Pips</th>
                        <th colspan="4" class="stop-header">Stop Loss 100 Pips</th>
                        <th rowspan="3" class="action-header">Azioni</th>
                    </tr>
                    <tr>
                        <th class="rr-header">1:1</th>
                        <th class="rr-header">1:2</th>
                        <th class="rr-header">1:3</th>
                        <th class="rr-header">1:4</th>
                        <th class="rr-header">1:1</th>
                        <th class="rr-header">1:2</th>
                        <th class="rr-header">1:3</th>
                        <th class="rr-header">1:4</th>
                        <th class="rr-header">1:1</th>
                        <th class="rr-header">1:2</th>
                        <th class="rr-header">1:3</th>
                        <th class="rr-header">1:4</th>
                        <th class="rr-header">1:1</th>
                        <th class="rr-header">1:2</th>
                        <th class="rr-header">1:3</th>
                        <th class="rr-header">1:4</th>
                    </tr>
                    <tr>
                        <th class="percentage-header" id="perc-30-1">0%</th>
                        <th class="percentage-header" id="perc-30-2">0%</th>
                        <th class="percentage-header" id="perc-30-3">0%</th>
                        <th class="percentage-header" id="perc-30-4">0%</th>
                        <th class="percentage-header" id="perc-50-1">0%</th>
                        <th class="percentage-header" id="perc-50-2">0%</th>
                        <th class="percentage-header" id="perc-50-3">0%</th>
                        <th class="percentage-header" id="perc-50-4">0%</th>
                        <th class="percentage-header" id="perc-75-1">0%</th>
                        <th class="percentage-header" id="perc-75-2">0%</th>
                        <th class="percentage-header" id="perc-75-3">0%</th>
                        <th class="percentage-header" id="perc-75-4">0%</th>
                        <th class="percentage-header" id="perc-100-1">0%</th>
                        <th class="percentage-header" id="perc-100-2">0%</th>
                        <th class="percentage-header" id="perc-100-3">0%</th>
                        <th class="percentage-header" id="perc-100-4">0%</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Righe dinamiche verranno inserite qui -->
                </tbody>
            </table>
        </div>

        <!-- Statistics -->
        <div class="statistics-container">
            <div class="statistics-header">
                <h3>Statistiche Performance</h3>
                <div class="stats-timeframe-info">
                    <span id="statsTimeframeLabel">M1 - 1 Minuto</span>
                </div>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <h4>Stop Loss 30 Pips</h4>
                    <div class="stat-row">
                        <span>Trade Totali:</span>
                        <span id="total-30">0</span>
                    </div>
                    <div class="stat-row">
                        <span>Win Rate:</span>
                        <span id="winrate-30">0%</span>
                    </div>
                    <div class="stat-row">
                        <span>Miglior RR:</span>
                        <span id="best-rr-30">N/A</span>
                    </div>
                </div>

                <div class="stat-card">
                    <h4>Stop Loss 50 Pips</h4>
                    <div class="stat-row">
                        <span>Trade Totali:</span>
                        <span id="total-50">0</span>
                    </div>
                    <div class="stat-row">
                        <span>Win Rate:</span>
                        <span id="winrate-50">0%</span>
                    </div>
                    <div class="stat-row">
                        <span>Miglior RR:</span>
                        <span id="best-rr-50">N/A</span>
                    </div>
                </div>

                <div class="stat-card">
                    <h4>Stop Loss 75 Pips</h4>
                    <div class="stat-row">
                        <span>Trade Totali:</span>
                        <span id="total-75">0</span>
                    </div>
                    <div class="stat-row">
                        <span>Win Rate:</span>
                        <span id="winrate-75">0%</span>
                    </div>
                    <div class="stat-row">
                        <span>Miglior RR:</span>
                        <span id="best-rr-75">N/A</span>
                    </div>
                </div>

                <div class="stat-card">
                    <h4>Stop Loss 100 Pips</h4>
                    <div class="stat-row">
                        <span>Trade Totali:</span>
                        <span id="total-100">0</span>
                    </div>
                    <div class="stat-row">
                        <span>Win Rate:</span>
                        <span id="winrate-100">0%</span>
                    </div>
                    <div class="stat-row">
                        <span>Miglior RR:</span>
                        <span id="best-rr-100">N/A</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <p>
                <strong>Istruzioni:</strong> Clicca sui cerchi per alternare tra Vuoto ‚Üí TP (Verde) ‚Üí SL (Rosso) ‚Üí Vuoto. 
                Le statistiche e percentuali si aggiornano automaticamente.
                <br><strong>Scorciatoie:</strong> Ctrl+N (nuova riga), Ctrl+Shift+C (cancella timeframe corrente)
                <br><strong>Calcolo Percentuali:</strong> TP = valore RR%, SL = sempre 1%. Guadagno = (TP √ó RR%) - (SL √ó 1%)
            </p>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>